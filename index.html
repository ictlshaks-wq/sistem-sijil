<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <div class="text-center mb-3">
  <img src="assets/logo.png"
       alt="Logo JPN Pahang"
       style="max-height:120px; width:auto; display:block; margin:0 auto 12px;">
</div>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600&family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">

  <!-- html2pdf (html2canvas + jsPDF) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>

  <style>
    :root{
      --primary-blue:#0B3A74;
      --gold-accent:#bc9355;
      --bg-light:#eef2f7;
    }

    body{
      background:var(--bg-light);
      padding:20px 0;
      font-family:'Montserrat',sans-serif;
    }

    /* Kad input */
    .input-card{
      max-width:560px;
      background:#fff;
      padding:28px;
      border-radius:16px;
      box-shadow:0 10px 25px rgba(0,0,0,.10);
      margin:18px auto;
    }
    .form-label{ font-weight:800; color:var(--primary-blue); }

    /* Container sijil */
    #certificate-container{ display:none; margin-top:26px; }

    .cert-viewport{
      overflow:auto;
      background:#d1d5db;
      padding:22px 10px;
      border-radius:12px;
      display:flex;
      justify-content:center;
      box-shadow:inset 0 2px 10px rgba(0,0,0,.12);
    }

    /* ====== SIJIL A4 PORTRAIT (MM) ====== */
    #actual-certificate{
      width:210mm;
      height:297mm;
      box-sizing:border-box;
      background:#fff;
      position:relative;
      text-align:center;
      color:#111;

      /* border buang */
      border:0;
      outline:0;
      outline-offset:0;

      padding:18mm 18mm 20mm 18mm;
      background-image:radial-gradient(circle,#ffffff 0%, #fdfbf7 100%);

      /* elak extra page */
      overflow:hidden;
      box-shadow:none;
      transform:none;
    }

    /* Preview scaling */
    #certScaleWrap{ transform-origin: top center; }

    .logo-box{
      height:28mm;
      display:flex;
      justify-content:center;
      align-items:center;
      margin-top:2mm;
      position:relative;
      z-index:2;
    }
    .logo-img{
      /* ✅ Logo kecil 30% (dari 33mm -> ~23mm) */
      max-height:30mm;
      width:auto;
      display:block;
      object-fit:contain;
    }

    .cert-header-title{
      font-family:'Cinzel',serif;
      font-size:20mm;
      color:var(--gold-accent);
      margin-top:2mm;
      letter-spacing:2.5mm;
      line-height:1.05;
      position:relative;
      z-index:2;
      text-transform:uppercase;
    }

    .cert-body{
      margin-top:8mm;
      position:relative;
      z-index:2;
    }

    .text-intro{
      font-size:5mm;
      margin-bottom:5mm;
    }

    .participant-name{
      font-family:'Cinzel',serif;
      font-weight:800;
      font-size:9mm;
      color:#000;
      margin:6mm 0 4mm 0;
      text-transform:uppercase;
      letter-spacing:0.7mm;
      padding-bottom:2.5mm;
      border-bottom:0.8mm solid var(--gold-accent);
      display:inline-block;
      width:100%;
    }

    .ic-text{
      font-size:4.7mm;
      margin-top:2mm;
      margin-bottom:8mm;
    }

    .text-participation{
      font-size:5mm;
      margin:4mm 0 3mm 0;
    }

    .program-name{
      font-family:'Cinzel',serif;
      font-weight:800;
      color:#0b1f3b;
      font-size:9mm;
      line-height:1.25;
      text-transform:uppercase;
      letter-spacing:0.6mm;
      margin:0;
    }

    .program-details{
      font-size:4.4mm;
      color:#444;
      margin-top:5mm;
    }

    /* TANDATANGAN */
    .signature-area{
      position:absolute;
      left:0;
      right:0;
      bottom:10mm;
      display:flex;
      flex-direction:column;
      align-items:center;
      z-index:2;
    }

    .signature-img{
      /* ✅ Tandatangan besar 80%: 18mm -> 32.4mm */
      height:48mm;
      width:auto;
      display:block;
      object-fit:contain;
      margin-bottom:-6mm;
    }

.signature-line{
  border-top:0.5mm solid #111;
  width:90mm;
  margin-left:auto;
  margin-right:auto;
  padding-top:3mm;
  text-align:center;
}


.signer-name{
  font-weight:800;
  font-size:4.5mm;
  text-transform:uppercase;
  margin-bottom:1mm;

  text-align:center;
  white-space:nowrap;
}



.signer-title{
  font-size:3.8mm;
  color:#333;
  line-height:1.25;
  text-align:center;
}


    .watermark{
      position:absolute;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%) rotate(-35deg);
      font-size:40mm;
      color:rgba(188,147,85,0.06);
      font-family:'Cinzel',serif;
      z-index:1;
      pointer-events:none;
      user-select:none;
      white-space:nowrap;
      text-transform:uppercase;
    }

    .spinner-border{ width:1.2rem; height:1.2rem; display:none; margin-right:8px; }
    .btn-success{ padding:12px 40px; font-weight:800; border-radius:10px; }

    @page { size: A4 portrait; margin: 0; }
    @media print{
      body{ background:#fff; padding:0; }
      .input-card, .cert-viewport, .btn, hr, p { display:none !important; }
      #certificate-container{ display:block !important; }
      #actual-certificate{ box-shadow:none !important; }
    }
  </style>
</head>

<body>
<div class="container">

  <!-- BORANG -->
  <div class="input-card">
    <h4 class="text-center mb-3" style="color:var(--primary-blue);">Sistem Sijil Digital JPN Pahang</h4>

    <div id="statusMsg" class="small text-center mb-3" style="min-height:18px;color:#0f766e;"></div>

    <div class="mb-3">
      <label class="form-label">Nama Penuh Peserta</label>
      <input type="text" id="inputNama" class="form-control"
       placeholder="SEPERTI DALAM KAD PENGENALAN"
       style="text-transform: uppercase;"
       oninput="this.value = this.value.toUpperCase();" />

    </div>

    <div class="mb-3">
      <label class="form-label">Nombor Kad Pengenalan</label>
      <input type="text" id="inputIC" class="form-control" placeholder="CONTOH: 010203060708" />
      <div class="form-text">Tip: boleh tanpa dash (-). Sistem paparkan seperti dimasukkan.</div>
    </div>

    <div class="mb-3">
      <label class="form-label text-danger">Kod Program</label>
      <input type="text" id="inputKod"
       placeholder="Masukkan kod daripada penganjur"
       style="text-transform: uppercase;"
       oninput="this.value = this.value.toUpperCase();" />

      <div class="form-text">Sistem akan baca Nama Program, Tarikh dan Tempat dari Google Sheet berdasarkan kod ini.</div>
    </div>

    <button onclick="janaSijilSekarang()" id="btnJana"
      class="btn btn-primary w-100 py-2 d-flex align-items-center justify-content-center">
      <div class="spinner-border text-light" role="status" id="loading"></div>
      <span id="btnText">Semak & Jana Sijil</span>
    </button>
    <div style="
    margin-top:8px;
    text-align:center;
    font-size:11px;
    color:#6b7280;
  ">
      <button id="btnReset" type="button" onclick="resetBorang()"
  style="margin-top:10px; width:100%; background:#e5e7eb; color:#111827; padding:10px; border-radius:10px; border:none; font-weight:700; cursor:pointer;">
  Reset / Peserta Baharu
</button>

    SISTEM INI DIBANGUNKAN OLEH UNIT TMK, SEKTOR PEMBELAJARAN, JPN PAHANG 2026
  </div>
</div>
@@ -551,31 +556,48 @@
      if(btn){ btn.disabled = false; btn.innerText = oldBtnText || "MUAT TURUN SIJIL (PDF A4)"; }
    }
  }
  <script>
function resetBorang(){
  // 1) kosongkan input
  document.getElementById("nama").value = "";
  document.getElementById("ic").value = "";
  document.getElementById("kod").value = "";

  // 2) sorok sijil (kalau container wujud)
  const sijil = document.getElementById("certificate-container");
  if (sijil) sijil.style.display = "none";

  // 3) buang mesej status (jika fungsi setStatus ada)
  if (typeof setStatus === "function") setStatus("", "#2563eb");
}
</script>

</script>
</body>
</html>


























